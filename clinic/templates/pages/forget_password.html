{% extends "base.html" %} {% load static %}

{% block titles %}Login Page || Nepal's Care {% endblock titles %}

{% block content %}

<div class="flex min-h-screen items-center justify-center p-4 ">
    <!-- Card container with subtle shadow -->
    <div class="relative w-full max-w-md overflow-hidden rounded-xl bg-white shadow-lg">
        <!-- Top accent bar -->
        <div class="h-2 bg-gradient-to-r from-blue-500 to-indigo-600"></div>

        <!-- Form container -->
        <div class="px-6 py-8 sm:px-10">
            <h2 class="mb-8 text-center text-2xl font-bold text-gray-800">Reset Password</h2>

            <form method="POST" action="{% url 'account:forgetPassword' %}">
                {% csrf_token %}

                <!-- Email field -->
                <div class="mb-6">
                    <label for="email" class="mb-1 block text-sm font-medium text-gray-700">
                        Email
                    </label>
                    <div class="relative">
                        <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                            <svg id='mail-filled_24' width='20' height='20' viewBox='0 0 24 24' class="text-gray-400"
                                xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>
                                <g transform="matrix(1 0 0 1 12 12)">
                                    <g style="">
                                        <g transform="matrix(1 0 0 1 0 0)">
                                            <path
                                                style="stroke: none; stroke-width: 2; stroke-dasharray: none; stroke-linecap: round; stroke-dashoffset: 0; stroke-linejoin: round; stroke-miterlimit: 4; fill: none; fill-rule: nonzero; opacity: 1;"
                                                transform=" translate(-12, -12)" d="M 0 0 L 24 0 L 24 24 L 0 24 z"
                                                stroke-linecap="round" />
                                        </g>
                                        <g transform="matrix(1 0 0 1 0 1.77)">
                                            <path
                                                style="stroke: #9ca3af; stroke-width: 0; stroke-dasharray: none; stroke-linecap: round; stroke-dashoffset: 0; stroke-linejoin: round; stroke-miterlimit: 4; fill: #9ca3af; fill-rule: nonzero; opacity: 1;"
                                                transform=" translate(-12, -13.77)"
                                                d="M 22 7.535 L 22 17 C 22.000088491259472 18.58855761036894 20.761821525552804 19.90180462251181 19.176000000000002 19.995 L 19.000000000000004 20 L 5.0000000000000036 20 C 3.4114423896310617 20.000088491259472 2.0981953774881914 18.761821525552804 2.0050000000000034 17.176000000000002 L 2.0000000000000036 17.000000000000004 L 2.0000000000000036 7.535000000000004 L 11.445000000000004 13.832000000000004 L 11.561000000000003 13.898000000000005 C 11.838017651257287 14.03335058443139 12.16198234874272 14.03335058443139 12.439000000000004 13.898000000000005 L 12.555000000000003 13.832000000000004 L 22.000000000000004 7.535000000000005 z"
                                                stroke-linecap="round" />
                                        </g>
                                        <g transform="matrix(1 0 0 1 0 -4.1)">
                                            <path
                                                style="stroke: #9ca3af; stroke-width: 0; stroke-dasharray: none; stroke-linecap: round; stroke-dashoffset: 0; stroke-linejoin: round; stroke-miterlimit: 4; fill: #9ca3af; fill-rule: nonzero; opacity: 1;"
                                                transform=" translate(-12, -7.9)"
                                                d="M 19 4 C 20.08 4 21.027 4.57 21.555 5.427 L 12 11.797 L 2.4450000000000003 5.4270000000000005 C 2.953736834003722 4.6007163877977995 3.8308162238907655 4.071637061697714 4.798999999999999 4.0070000000000014 L 5 4.000000000000001 L 19 4.000000000000001 z"
                                                stroke-linecap="round" />
                                        </g>
                                    </g>
                                </g>
                            </svg>
                        </div>
                        <input id="email" name="email" type="email" required
                            class="block w-full rounded-lg border border-gray-300 bg-white py-3 pl-10 pr-3 text-gray-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"
                            placeholder="name@example.com">
                    </div>
                </div>

                <!-- Description text -->
                <div class="mb-6">
                    <p class="text-sm text-gray-600">
                        Enter your email address and we'll send you a link to reset your password.
                    </p>
                </div>

                <!-- Reset Password button -->
                <div class="mb-6">
                    <button type="submit"
                        class="flex w-full justify-center rounded-lg bg-blue-600 py-3 px-4 font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                        Send Reset Link
                    </button>
                </div>
            </form>

            <!-- Divider -->
            <div class="relative my-6">
                <div class="absolute inset-0 flex items-center">
                    <div class="w-full border-t border-gray-300"></div>
                </div>
                <div class="relative flex justify-center text-sm">
                    <span class="bg-white px-2 text-gray-500">or</span>
                </div>
            </div>

            <!-- Back to login link -->
            <div class="text-center">
                <a href="{% url 'account:login' %}" class="font-medium text-blue-600 hover:text-blue-500">
                    Back to login
                </a>
            </div>
        </div>
    </div>
</div>

{% endblock content %}

<script>
    // Toggle password visibility for new password
    const toggleNewPassword = document.getElementById('toggleNewPassword');
    const newPasswordField = document.getElementById('new_password');
    const openEyeNew = document.getElementById('open-eye-new');
    const closedEyeNew = document.getElementById('closed-eye-new');

    toggleNewPassword.addEventListener('click', function () {
        if (newPasswordField.type === 'password') {
            newPasswordField.type = 'text';
            openEyeNew.classList.add('hidden');
            closedEyeNew.classList.remove('hidden');
        } else {
            newPasswordField.type = 'password';
            openEyeNew.classList.remove('hidden');
            closedEyeNew.classList.add('hidden');
        }
    });

    // Toggle password visibility for confirm password
    const toggleConfirmPassword = document.getElementById('toggleConfirmPassword');
    const confirmPasswordField = document.getElementById('confirm_password');
    const openEyeConfirm = document.getElementById('open-eye-confirm');
    const closedEyeConfirm = document.getElementById('closed-eye-confirm');

    toggleConfirmPassword.addEventListener('click', function () {
        if (confirmPasswordField.type === 'password') {
            confirmPasswordField.type = 'text';
            openEyeConfirm.classList.add('hidden');
            closedEyeConfirm.classList.remove('hidden');
        } else {
            confirmPasswordField.type = 'password';
            openEyeConfirm.classList.remove('hidden');
            closedEyeConfirm.classList.add('hidden');
        }
    });

    // Check if passwords match
    const passwordMatchMessage = document.getElementById('password-match-message');
    const submitButton = document.getElementById('submit-button');

    function checkPasswordMatch() {
        if (confirmPasswordField.value === '') {
            passwordMatchMessage.classList.add('hidden');
            return;
        }

        if (newPasswordField.value !== confirmPasswordField.value) {
            passwordMatchMessage.classList.remove('hidden');
            submitButton.disabled = true;
            submitButton.classList.add('opacity-70', 'cursor-not-allowed');
        } else {
            passwordMatchMessage.classList.add('hidden');
            submitButton.disabled = false;
            submitButton.classList.remove('opacity-70', 'cursor-not-allowed');
        }
    }

    newPasswordField.addEventListener('input', checkPasswordMatch);
    confirmPasswordField.addEventListener('input', checkPasswordMatch);
</script>
{% block scripts %}


{% endblock scripts %}